<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
</head>
<body>
    <button title="создать превью" onclick="generatePreview()">сщздать превью</button>
    <br />
    <video id="origVideo" width="640" height="360" style="border: 1px solid grey;">
        <source src="video/vsvideo (1).mp4">
        <source src="video/vsvideo (1).ogg">
        <source src="video/vsvideo.webm">
    </video>
    <br />
    <canvas id="previewMed" style="border: 1px solid gray;"></canvas>
    <canvas id="previewSm" style="border: 1px solid gray;"></canvas>
<script>
    function generatePreview(){
        var video= document.getElementById('origVideo')
        var convas1 =document.getElementById('previewMed')
        var context1 =convas1.getContext('2d')
        var convas2 =document.getElementById('previewMed')
        var context2 =convas2.getContext('2d')
        canvas1.width=320;
        canvas1.height=150;
        canvas2.width=160;
        canvas2.height=90;
        video.addEventListener('play', function (){
            drawVideo(this,context1,context2)
        },false)
        video.play();
    }
    function drawVideo(video,canvas1,canvas2){
        if(video.paused || video.ended){return false}{
    }
    canvas1.drawImage(video,0,0,320,180)
    canvas2.drawImage(video,0,0,160,90)
    setTimeout(drawVideo,25,video,canvas1,canvas2)
}
</script>
</body>
</html>